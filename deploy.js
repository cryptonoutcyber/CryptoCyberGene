const web3 = require('@solana/web3.js'); const spl = require('@solana/spl-token'); async function deploy() { console.log('DEPLOYING OMEGA PRIME'); const connection = new web3.Connection('https://api.devnet.solana.com', 'confirmed'); const mint = web3.Keypair.generate(); const payer = web3.Keypair.generate(); console.log('Mint:', mint.publicKey.toBase58()); console.log('Payer:', payer.publicKey.toBase58()); const airdrop = await connection.requestAirdrop(payer.publicKey, 2e9); await connection.confirmTransaction(airdrop); const balance = await connection.getBalance(payer.publicKey); console.log('Balance:', balance/1e9, 'SOL'); const rent = await spl.getMinimumBalanceForRentExemptMint(connection); const tx = new web3.Transaction().add(web3.SystemProgram.createAccount({fromPubkey: payer.publicKey, newAccountPubkey: mint.publicKey, space: spl.MINT_SIZE, lamports: rent, programId: spl.TOKEN_2022_PROGRAM_ID}), spl.createInitializeMintInstruction(mint.publicKey, 9, payer.publicKey, payer.publicKey, spl.TOKEN_2022_PROGRAM_ID)); const sig = await web3.sendAndConfirmTransaction(connection, tx, [payer, mint]); console.log('SUCCESS! Mint:', mint.publicKey.toBase58()); console.log('Transaction:', sig); console.log('Explorer: https://explorer.solana.com/tx/' + sig + '?cluster=devnet'); } deploy().catch(console.error);
